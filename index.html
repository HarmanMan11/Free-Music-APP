<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Free Music App</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');

  body {
    margin: 0;
    font-family: 'Montserrat', sans-serif;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    color: #f0f0f0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    transition: background 0.5s ease;
  }
  header {
    background-color: rgba(255, 255, 255, 0.1);
    padding: 1.8rem 1rem;
    text-align: center;
    box-shadow: 0 8px 15px rgba(0, 255, 136, 0.4);
    backdrop-filter: blur(8px);
  }
  header h1 {
    margin: 0;
    font-weight: 700;
    font-size: 2.4rem;
    color: #00ff88;
    letter-spacing: 1.3px;
    text-shadow: 0 0 8px #00ff88;
  }
  .controls {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    justify-content: center;
    padding: 1rem 1rem 1.5rem;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(6px);
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    border-radius: 0 0 20px 20px;
  }
  .controls input[type="search"] {
    flex-grow: 1;
    max-width: 320px;
    padding: 0.7rem 1.2rem;
    border-radius: 50px;
    border: none;
    font-size: 1rem;
    outline: none;
    box-shadow: inset 0 0 10px rgba(0, 255, 136, 0.3);
    color: #d4ffd4;
    background-color: rgba(0, 0, 0, 0.25);
    transition: background-color 0.3s ease;
  }
  .controls input[type="search"]:focus {
    background-color: rgba(0, 255, 136, 0.15);
  }
  .controls button {
    background: linear-gradient(135deg, #00ff88, #00cc66);
    border: none;
    padding: 0.55rem 1.6rem;
    border-radius: 30px;
    cursor: pointer;
    font-weight: 600;
    font-size: 1rem;
    color: #012a0f;
    box-shadow: 0 4px 8px #00cc66aa;
    transition: all 0.3s ease;
    user-select: none;
    text-shadow: 0 1px 1px rgba(255 255 255 / 0.3);
  }
  .controls button:hover,
  .controls button:focus {
    background: linear-gradient(135deg, #00cc66, #009933);
    box-shadow: 0 6px 15px #00ff88cc;
    outline: none;
    transform: translateY(-2px);
  }
  #trackList {
    flex-grow: 1;
    padding: 2rem 1rem 3rem;
    display: flex;
    flex-direction: column;
    gap: 1.3rem;
    max-width: 720px;
    margin: 0 auto 2rem auto;
  }
  .track {
    background: linear-gradient(135deg, #222, #1a3a2a);
    padding: 1.3rem 1.5rem;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0, 255, 136, 0.4);
    position: relative;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .track:hover {
    transform: scale(1.03);
    box-shadow: 0 8px 25px rgba(0, 255, 136, 0.65);
  }
  .track h3 {
    margin: 0 0 0.6rem 0;
    font-weight: 700;
    color: #a6ffd1;
    letter-spacing: 0.04em;
    user-select: none;
    text-shadow: 0 0 6px #00ff88;
  }
  audio {
    width: 100%;
    outline: none;
    border-radius: 10px;
    filter: drop-shadow(0 2px 3px rgba(0, 255, 136, 0.3));
    cursor: pointer;
  }
  .like {
    position: absolute;
    top: 1.1rem;
    right: 1.3rem;
    cursor: pointer;
    font-size: 1.9rem;
    user-select: none;
    transition: color 0.3s ease, transform 0.3s ease;
    color: #28a745aa;
    filter: drop-shadow(0 0 2px #28a745cc);
  }
  .like:hover {
    color: #00ff88;
    transform: scale(1.2);
  }
  .like.liked {
    color: #ff4081;
    filter: drop-shadow(0 0 8px #ff4081cc);
  }
  .like.liked:hover {
    color: #ff79a3;
    transform: scale(1.3);
  }
  footer {
    background-color: rgba(0, 0, 0, 0.3);
    padding: 1.2rem;
    font-size: 0.9rem;
    color: #88ffaa;
    text-align: center;
    user-select: none;
    backdrop-filter: blur(8px);
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
    box-shadow: 0 -5px 15px rgba(0, 255, 136, 0.3);
  }
  /* Light theme override */
  body.light {
    background: linear-gradient(135deg, #f0f0f0, #a0e5a0);
    color: #222;
  }
  body.light header {
    background-color: rgba(255, 255, 255, 0.8);
    box-shadow: 0 8px 15px #88cc88;
    color: #007700;
  }
  body.light .controls {
    background-color: rgba(255, 255, 255, 0.75);
    box-shadow: 0 2px 10px #99cc9999;
  }
  body.light .controls input[type="search"] {
    color: #222;
    background-color: rgba(255, 255, 255, 0.85);
    box-shadow: inset 0 0 8px #66bb6633;
  }
  body.light .controls input[type="search"]:focus {
    background-color: #d0f0d0;
  }
  body.light .controls button {
    background: linear-gradient(135deg, #55aa55, #339933);
    color: #e6ffe6;
    box-shadow: 0 4px 8px #339933aa;
    text-shadow: 0 0 4px #00000066;
  }
  body.light .controls button:hover,
  body.light .controls button:focus {
    background: linear-gradient(135deg, #339933, #117711);
    box-shadow: 0 6px 15px #44ff4488;
    color: #bbffbb;
  }
  body.light #trackList {
    max-width: 720px;
  }
  body.light .track {
    background: linear-gradient(135deg, #d7ffd7, #a4e2a4);
    color: #225522;
    box-shadow: 0 5px 15px #88cc8855;
  }
  body.light .track:hover {
    box-shadow: 0 8px 25px #77bb7755;
  }
  body.light .track h3 {
    color: #145214;
    text-shadow: none;
  }
  body.light audio {
    filter: none;
  }
  body.light .like {
    color: #228822cc;
    filter: none;
  }
  body.light .like:hover {
    color: #006600;
  }
  body.light .like.liked {
    color: #bb0055;
    filter: none;
  }
  body.light footer {
    background-color: rgba(255, 255, 255, 0.8);
    color: #336633;
    box-shadow: 0 -5px 15px #99cc9977;
  }
</style>
</head>
<body>

<header>
  <h1>üéµ Free Music App</h1>
</header>

<div class="controls">
  <input type="search" id="search" placeholder="–ü–æ–∏—Å–∫ —Ç—Ä–µ–∫–∞..." autocomplete="off" />
  <button data-genre="all" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç—Ä–µ–∫–∏">–í—Å–µ</button>
  <button data-genre="classical" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫—É—é –º—É–∑—ã–∫—É">–ö–ª–∞—Å—Å–∏–∫–∞</button>
  <button data-genre="lounge" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –ª–∞—É–Ω–∂">–õ–∞—É–Ω–∂</button>
  <button data-genre="electronic" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫—É">–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞</button>
  <button data-genre="vintage" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –≤–∏–Ω—Ç–∞–∂">–í–∏–Ω—Ç–∞–∂</button>
  <button data-genre="ethno" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç–Ω–æ">–≠—Ç–Ω–æ</button>
  <button data-genre="live" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –ª–∞–π–≤">–õ–∞–π–≤</button>
  <button id="showFavoritesBtn" aria-pressed="false" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ">‚ù§Ô∏è –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
  <button id="toggleThemeBtn" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåì –¢–µ–º–∞</button>
</div>

<div id="trackList" role="list" aria-live="polite" aria-label="–°–ø–∏—Å–æ–∫ –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤"></div>

<footer>
  Made with ‚ù§Ô∏è using archive.org open music
</footer>

<script>
(() => {
  const tracks = [
    { title: "Beethoven - Symphony No.5", src: "https://archive.org/download/BeethovenSymphony5/BeethovenSymphony5.mp3", genre: "classical" },
    { title: "Chopin - Prelude No.15", src: "https://archive.org/download/Chopin_Prelude_No_15/Chopin_Prelude_No_15.mp3", genre: "classical" },
    { title: "Electronic Breeze", src: "https://archive.org/download/electronic_beats/electronic_breeze.mp3", genre: "electronic" },
    { title: "Lounge Cafe", src: "https://archive.org/download/lounge_collection/lounge_cafe.mp3", genre: "lounge" },
    { title: "Vintage Jazz", src: "https://archive.org/download/vintage_jazz/vintage_jazz_01.mp3", genre: "vintage" },
    { title: "Ethno Vibes", src: "https://archive.org/download/ethno_collection/ethno_vibes.mp3", genre: "ethno" },
    { title: "Live Session A", src: "https://archive.org/download/live_music_a/live_session_a.mp3", genre: "live" },
  ];

  let appState = {
    currentGenre: 'all',
    favorites: JSON.parse(localStorage.getItem('favorites') || '[]'),
    showingFavorites: false,
  };

  const trackListEl = document.getElementById('trackList');
  const searchInput = document.getElementById('search');
  const showFavoritesBtn = document.getElementById('showFavoritesBtn');
  const toggleThemeBtn = document.getElementById('toggleThemeBtn');
  const genreButtons = document.querySelectorAll('.controls button[data-genre]');

  function saveFavorites() {
    localStorage.setItem('favorites', JSON.stringify(appState.favorites));
  }

  function isFavorite(src) {
    return appState.favorites.includes(src);
  }

  function toggleLike(src, el) {
    if (isFavorite(src)) {
      appState.favorites = appState.favorites.filter(f => f !== src);
      el.classList.remove('liked');
      el.setAttribute('aria-pressed', 'false');
    } else {
      appState.favorites.push(src);
      el.classList.add('liked');
      el.setAttribute('aria-pressed', 'true');
    }
    saveFavorites();
  }

  function createTrackElement(track) {
    const div = document.createElement('div');
    div.className = 'track';
    div.setAttribute('role', 'listitem');
    div.tabIndex = 0;
    div.innerHTML = `
      <h3>${track.title}</h3>
      <audio controls src="${track.src}"></audio>
      <button class="like" aria-label="–î–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ —É–±—Ä–∞—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ" aria-pressed="${isFavorite(track.src) ? 'true' : 'false'}">‚ù§Ô∏è</button>
    `;
    const likeEl = div.querySelector('.like');
    likeEl.addEventListener('click', () => toggleLike(track.src, likeEl));
    return div;
  }

  function renderTracks() {
    trackListEl.innerHTML = '';

    let filteredTracks;

    if (appState.showingFavorites) {
      filteredTracks = tracks.filter(t => isFavorite(t.src));
    } else {
      filteredTracks = tracks.filter(t => appState.currentGenre === 'all' || t.genre === appState.currentGenre);
      const searchVal = searchInput.value.trim().toLowerCase();
      if (searchVal) {
        filteredTracks = filteredTracks.filter(t => t.title.toLowerCase().includes(searchVal));
      }
    }

    if (filteredTracks.length === 0) {
      trackListEl.textContent = '–¢—Ä–µ–∫–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.';
      return;
    }

    filteredTracks.forEach(track => {
      trackListEl.appendChild(createTrackElement(track));
    });
  }

  function setGenre(genre) {
    appState.currentGenre = genre;
    appState.showingFavorites = false;
    showFavoritesBtn.textContent = '‚ù§Ô∏è –ò–∑–±—Ä–∞–Ω–Ω–æ–µ';
    showFavoritesBtn.setAttribute('aria-pressed', 'false');
    renderTracks();
  }

  function toggleFavoritesView() {
    appState.showingFavorites = !appState.showingFavorites;
    showFavoritesBtn.textContent = appState.showingFavorites ? '‚¨ÖÔ∏è –í—Å–µ —Ç—Ä–µ–∫–∏' : '‚ù§Ô∏è –ò–∑–±—Ä–∞–Ω–Ω–æ–µ';
    showFavoritesBtn.setAttribute('aria-pressed', appState.showingFavorites ? 'true' : 'false');
    renderTracks();
  }

  function toggleTheme() {
    const isLight = document.body.classList.toggle('light');
    localStorage.setItem('theme', isLight ? 'light' : 'dark');
  }

  // –ò–≤–µ–Ω—Ç—ã
  searchInput.addEventListener('input', () => {
    appState.showingFavorites = false;
    showFavoritesBtn.textContent = '‚ù§Ô∏è –ò–∑–±—Ä–∞–Ω–Ω–æ–µ';
    showFavoritesBtn.setAttribute('aria-pressed', 'false');
    renderTracks();
  });

  genreButtons.forEach(btn => {
    btn.addEventListener('click', () => setGenre(btn.dataset.genre));
  });

  showFavoritesBtn.addEventListener('click', toggleFavoritesView);
  toggleThemeBtn.addEventListener('click', toggleTheme);

  // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–º—ã –∏–∑ localStorage
  if(localStorage.getItem('theme') === 'light') {
    document.body.classList.add('light');
  }

  // –†–µ–Ω–¥–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  renderTracks();
})();
</script>

</body>
</html>
